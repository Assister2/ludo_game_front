/*! For license information please see bundle.1fd3f24c4ad268c254ce.js.LICENSE.txt */
(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[962],{84040:function(e,t,n){"use strict";n.d(t,{L:function(){return r}});var r="https://www.gotiking.com/"},86962:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return S}});var r=n(72132),a=(n(55202),n(67294)),l=n(84040),o=n(37723),i=function(e){var t,n,r=e.item,l=e.CDN_URL;return a.createElement("div",{className:"my-2 card"},a.createElement("div",{className:"text-start card-body"},a.createElement("div",{className:"d-flex align-items-center justify-content-between"},a.createElement("div",{className:"d-flex flex-column align-items-start vstack gap-2 minBreakpoint-xs"},a.createElement("div",{className:"bg-dark rounded-circle me-2",style:{height:"24px",width:"24px"}},a.createElement("img",{src:"".concat(l,"avatar/").concat(r.creator.profileImage),alt:"avatar"})),a.createElement("span",{className:" fw-semibold text-truncate text-end"},null==r||null===(t=r.creator)||void 0===t?void 0:t.username.slice(0,5),"...")),a.createElement("div",{className:"d-flex flex-column align-items-center vstack gap-2 minBreakpoint-xs"},a.createElement("span",null,a.createElement("em",null,a.createElement("img",{src:"\thttps://ludoplayers.com/static/media/vs.c153e22fa9dc9f58742d.webp",alt:"verses-icon",width:"24"}))),a.createElement("span",{className:"text-success fw-bold text-center"},"Rs",r.amount)),a.createElement("div",{className:"d-flex flex-column align-items-end vstack gap-2 minBreakpoint-xs"},a.createElement("div",{className:"bg-dark rounded-circle",style:{height:"24px",width:"24px"}},a.createElement("img",{src:"".concat(l,"avatar/").concat(r.player.profileImage),alt:"Avatar"})),a.createElement("span",{className:" fw-semibold text-truncate text-end"},null===(n=r.player)||void 0===n?void 0:n.username.slice(0,5),"...")))))},s=function(e){var t,n,r,l,o,i,s,c,d,u,m,p=e.item,f=e.ws,v=e.userId,y=e.CDN_URL,h=e.setIsButtonDisabled,g=e.setIsButtonType,b=e.playGameLoading,E=e.startGameLoading,w=(e.cancelChallenge,e.viewGame),x=e.viewHold,A=e.isButtonDisabled,_=e.isButtonType,C=e.RequestedLoading,N=e.cancelChallengeCreator;return a.createElement("div",{className:"my-2 card"},a.createElement("div",{className:"d-flex align-items-center justify-content-between card-header"},"requested"===p.state&&p.creator._id===v?a.createElement("span",null,"Requested Challenge By"):"playing"===p.state?a.createElement("span",null,"Challenge running with"):a.createElement("span",null,"Challenge set by"),a.createElement("span",{className:"text-success fw-bold"},"Rs ",p.amount)),a.createElement("div",{className:"d-flex align-items-center justify-content-between card-body"},a.createElement("div",{className:"d-flex align-items-center flex-grow-1"},a.createElement("div",{style:{height:"24px",width:"24px"}},a.createElement("div",{style:{width:"24px",height:"24px",borderRadius:"50%"},className:"bg-success rounded-circle position-relative"},a.createElement("img",{src:"".concat(y,"avatar/").concat(p.creator.profileImage),style:{width:"100%",height:"100%",borderRadius:"50%",objectFit:"contain"},alt:"Avatar"}))),p.creator._id===v&&"open"===p.state?a.createElement("div",{className:"d-flex align-items-center justify-content-start"},a.createElement("div",{role:"status",className:"me-2 spinner-border",style:{marginLeft:"5px"}},a.createElement("span",{className:"visually-hidden"},p.creator._id===v&&"hold"===p.state?"waiting for player to start":"finding player...")),a.createElement("span",{className:"text-capitalize"},"finding player")):a.createElement(a.Fragment,null,a.createElement("div",{style:{marginLeft:"5px"}},a.createElement("span",{className:"fw-semibold text-truncate text-start",style:{width:"100px"}},"open"===p.state?"".concat(null==p||null===(t=p.creator)||void 0===t?void 0:t.username.slice(0,5),"..."):p.creator._id===v?"".concat(null==p||null===(n=p.player)||void 0===n?void 0:n.username.slice(0,5),"..."):"".concat(null==p||null===(r=p.creator)||void 0===r?void 0:r.username.slice(0,5),"..."))))),a.createElement("div",{className:"d-flex align-items-center"},a.createElement("div",{className:"hstack gap-2 minBreakpoint-xs"},(null===(l=p.creator)||void 0===l?void 0:l._id)===v&&"open"===p.state&&a.createElement("button",{disabled:p._id===A&&"delete"===_,className:"btn btn-danger playChallange btn-sm",onClick:function(){h(p._id),g("delete")}},"Delete"),"open"===p.state&&(null===(o=p.creator)||void 0===o?void 0:o._id)!==v&&a.createElement("button",{className:"btn btn-primary playChallange btn-sm",onClick:function(){h(p),g("playChallange")},disabled:p._id===A&&b},"Play"),(null===(i=p.player)||void 0===i?void 0:i._id)===v&&"requested"===p.state&&a.createElement("button",{disabled:C,className:"btn btn-secondary btn-sm",onClick:function(){h(p._id),g("requested")}},"Requested"),(null===(s=p.creator)||void 0===s?void 0:s._id)===v&&"requested"===p.state&&a.createElement("div",{className:"hstack gap-2 minBreakpoint-xs"},a.createElement("button",{disabled:E,className:"checkCancelRequest btn btn-success viewChallange btn-sm",onClick:function(){h(p._id),g("viewChallange")}},"Play"),a.createElement("button",{disabled:N,className:"btn btn-danger cancelRequest btn-sm",onClick:function(){f.send(JSON.stringify({type:"cancel",payload:{challengeId:p._id,userId:v}}))}},"Cancel")),(null===(c=p.player)||void 0===c?void 0:c._id)===v&&"playing"===p.state&&""===p.results.player.result&&a.createElement("button",{className:"btn btn-success btn-sm",onClick:function(){w(p._id)}},"view"),(null===(d=p.creator)||void 0===d?void 0:d._id)===v&&"playing"===p.state&&""===p.results.creator.result&&a.createElement("button",{onClick:function(){w(p._id)},className:"btn btn-success btn-sm"},"view"),(null===(u=p.creator)||void 0===u?void 0:u._id)===v&&"playing"===p.state&&""!==p.results.creator.result&&a.createElement("button",{onClick:function(){x(p)},className:"btn btn-success btn-sm"},"view"),(null===(m=p.player)||void 0===m?void 0:m._id)===v&&"playing"===p.state&&""!==p.results.player.result&&a.createElement("button",{onClick:function(){x(p)},className:"btn btn-success btn-sm"},"view")))))},c=a.memo((function(e){var t=e.isButtonType,n=e.setIsButtonType,r=e.setIsButtonDisabled,c=e.isButtonDisabled,d=e.playGameLoading,u=e.cancelChallenge,m=e.startGameLoading,p=e.challenges,f=e.handleOpen,v=e.userId,y=e.RequestedLoading,h=e.viewGame,g=e.viewHold,b=e.cancelChallengeCreator,E=e.ws,w=a.useMemo((function(){return p.map((function(e){var p,w,x,A,_,C,N,k,S,I,B,L,O,R;return a.createElement(o.Z,{key:e._id,timeout:100,classNames:{enter:"",enterActive:(null===(p=e.creator)||void 0===p?void 0:p._id)!==v?"card-animation-enter-active":""}},a.createElement("li",{className:(null===(w=e.creator)||void 0===w?void 0:w._id)!==v?"p-0 overflow-hidden appear-from-left":"p-0 overflow-hidden"},(null===(x=e.creator)||void 0===x?void 0:x._id)!=v&&(null===(A=e.player)||void 0===A?void 0:A._id)!=v&&"playing"==e.state?a.createElement("div",null,a.createElement(i,{item:e,CDN_URL:l.L})):"open"==e.state||"requested"==e.state||"playing"==e.state?a.createElement("div",null,a.createElement(s,{ws:E,item:e,userId:v,CDN_URL:l.L,setIsButtonDisabled:r,setIsButtonType:n,playGameLoading:d,startGameLoading:m,cancelChallenge:u,viewGame:h,viewHold:g,isButtonDisabled:c,isButtonType:t,RequestedLoading:y,cancelChallengeCreator:b})):a.createElement(a.Fragment,null,(null===(_=e.creator)||void 0===_?void 0:_._id)!=v&&(null===(C=e.player)||void 0===C?void 0:C._id)!=v||"hold"!=e.state?a.createElement(a.Fragment,null,a.createElement("div",{className:"d-flex align-items-center"},a.createElement("div",{className:"hstack gap-2 minBreakpoint-xs"},a.createElement("button",{className:"btn btn-success btn-sm",onClick:function(){g(e)}},"View")))):a.createElement("div",{className:"my-2 card"},a.createElement("div",{className:"d-flex align-items-center justify-content-between card-header"},a.createElement("span",null,"Challenge running with"),a.createElement("span",{className:"text-success fw-bold"},"Rs ",e.amount)),a.createElement("div",{className:"d-flex align-items-center justify-content-between card-body"},a.createElement("div",{className:"d-flex align-items-center flex-grow-1"},a.createElement("div",{style:{height:"24px",width:"24px"}},a.createElement("div",{style:{width:"24px",height:"24px",marginLeft:"-5px",backgroundSize:"contain",backgroundImage:"url(".concat(l.L,"avatar/").concat(null==e||null===(N=e.player)||void 0===N?void 0:N.profileImage)},className:"bg-success rounded-circle position-relative"})),a.createElement("div",null,a.createElement("span",{className:"fw-semibold text-truncate text-start",style:{width:"100px"}},"open"==e.state?"".concat(null==e||null===(k=e.creator)||void 0===k?void 0:k.username.slice(0,5),"..."):e.creator._id==v?"".concat(null==e||null===(S=e.player)||void 0===S?void 0:S.username.slice(0,5),"..."):"".concat(null==e||null===(I=e.creator)||void 0===I?void 0:I.username.slice(0,5),"...")))),(null===(B=e.creator)||void 0===B?void 0:B._id)===v&&null!==(L=e.results.creator)&&void 0!==L&&L.timeover&&"hold"===e.state||(null===(O=e.player)||void 0===O?void 0:O._id)===v&&null!==(R=e.results.player)&&void 0!==R&&R.timeover&&"hold"===e.state?a.createElement("div",{className:"d-flex align-items-center"},a.createElement("div",{className:"hstack gap-2 minBreakpoint-xs"},a.createElement("button",{className:"btn btn-danger btn-sm",onClick:f},"Hold"))):a.createElement("div",{className:"d-flex align-items-center"},a.createElement("div",{className:"hstack gap-2 minBreakpoint-xs"},a.createElement("button",{className:"btn btn-success btn-sm",onClick:function(){g(e)}},"View"))))))))}))}),[p,c,t,r,n,m,v,d,b,f,h,g,y,u]);return a.createElement("ul",{style:{padding:0},className:"challenge-list"},w)})),d=(n(61252),function(e){var t,n,r,o,i,s,c,d=e.holdModal,u=e.holdChallenge,m=e.userId,p=e.setHoldModal;return a.createElement("div",{role:"dialog","aria-modal":"true",className:"h-50 offcanvas offcanvas-bottom ".concat(d?"show":""),tabIndex:"-1",style:{visibility:"visible"}},a.createElement("div",{className:"offcanvas-header"},a.createElement("div",{className:"text-capitalize d-flex flex-column align-items-start justify-content-start offcanvas-title h5",style:{fontSize:"1.3rem"}},a.createElement("div",null,a.createElement("span",{style:{fontWeight:"bold"}},"room code: "),a.createElement("span",null,null==u?void 0:u.roomCode)),a.createElement("div",null,a.createElement("span",{style:{fontWeight:"bold"}},"Your Result: "),a.createElement("span",null,"I"," ",(null==u||null===(t=u.creator)||void 0===t?void 0:t._id)===m?null==u||null===(n=u.results)||void 0===n||null===(n=n.creator)||void 0===n?void 0:n.result:null==u||null===(r=u.results)||void 0===r||null===(r=r.player)||void 0===r?void 0:r.result))),a.createElement("button",{type:"button",onClick:function(){p(!1)},className:"btn-close","aria-label":"Close"})),a.createElement("div",{className:"offcanvas-body"},a.createElement("div",{className:"card"},a.createElement("div",{className:"text-start card-body"},a.createElement("div",{className:"d-flex align-items-center justify-content-between"},a.createElement("div",{className:"d-flex align-items-center"},a.createElement("div",{className:"bg-dark rounded-circle me-2",style:{height:"24px",width:"24px"}},a.createElement("img",{src:"".concat(l.L,"avatar/").concat(null==u||null===(o=u.player)||void 0===o?void 0:o.profileImage),alt:"avatar"})),a.createElement("span",{className:"fw-semibold text-truncate",style:{width:"80px"}},null==u||null===(i=u.player)||void 0===i?void 0:i.username)),a.createElement("div",null,a.createElement("img",{src:"https://ludoplayers.com/static/media/vs.c153e22fa9dc9f58742d.webp",height:"40",alt:"vs"})),a.createElement("div",{className:"d-flex flex-row-reverse align-items-center"},a.createElement("div",{className:"bg-dark rounded-circle ms-2",style:{height:"24px",width:"24px"}},a.createElement("img",{src:"".concat(l.L,"avatar/").concat(null==u||null===(s=u.creator)||void 0===s?void 0:s.profileImage),alt:"avatar"})),a.createElement("span",{className:" fw-semibold text-truncate",style:{width:"80px"}},null==u||null===(c=u.creator)||void 0===c?void 0:c.username))),a.createElement("div",{className:"d-flex align-items-center justify-content-center pt-3"},a.createElement("span",{className:"text-success fw-bold"},"₹",null==u?void 0:u.amount)))),a.createElement("hr",null),a.createElement("p",{style:{fontSize:"0.8rem"}},"Your Game Result is Successfully Posted. Please allow us 2-5 minutes to review & update your game. If you have Posted Wrong Result or Screenshot, kindly ",a.createElement("a",{href:"/support"},"Contact Support"))))}),u=n(31955),m=n(14309),p=n(36470),f=n(72519);var v=n(95477),y=n(52663),h=n(95998),g=n.p+"assets/notification.a673b70c68f18f662b4c7f280b108b03.mp3",b=n(29525),E=n(22318);function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function x(){x=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},l=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",i=a.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function c(e,t,n,a){var l=t&&t.prototype instanceof m?t:m,o=Object.create(l.prototype),i=new k(a||[]);return r(o,"_invoke",{value:A(e,n,i)}),o}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var u={};function m(){}function p(){}function f(){}var v={};s(v,l,(function(){return this}));var y=Object.getPrototypeOf,h=y&&y(y(S([])));h&&h!==t&&n.call(h,l)&&(v=h);var g=f.prototype=m.prototype=Object.create(v);function b(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function a(r,l,o,i){var s=d(e[r],e,l);if("throw"!==s.type){var c=s.arg,u=c.value;return u&&"object"==w(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){a("next",e,o,i)}),(function(e){a("throw",e,o,i)})):t.resolve(u).then((function(e){c.value=e,o(c)}),(function(e){return a("throw",e,o,i)}))}i(s.arg)}var l;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){a(e,n,t,r)}))}return l=l?l.then(r,r):r()}})}function A(e,t,n){var r="suspendedStart";return function(a,l){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw l;return I()}for(n.method=a,n.arg=l;;){var o=n.delegate;if(o){var i=_(o,n);if(i){if(i===u)continue;return i}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=d(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===u)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function _(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),u;var a=d(r,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,u;var l=a.arg;return l?l.done?(t[e.resultName]=l.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):l:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function S(e){if(e){var t=e[l];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:I}}function I(){return{value:void 0,done:!0}}return p.prototype=f,r(g,"constructor",{value:f,configurable:!0}),r(f,"constructor",{value:p,configurable:!0}),p.displayName=s(f,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,s(e,i,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(E.prototype),s(E.prototype,o,(function(){return this})),e.AsyncIterator=E,e.async=function(t,n,r,a,l){void 0===l&&(l=Promise);var o=new E(c(t,n,r,a),l);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},b(g),s(g,i,"Generator"),s(g,l,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=S,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(N),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var l=this.tryEntries[a],o=l.completion;if("root"===l.tryLoc)return r("end");if(l.tryLoc<=this.prev){var i=n.call(l,"catchLoc"),s=n.call(l,"finallyLoc");if(i&&s){if(this.prev<l.catchLoc)return r(l.catchLoc,!0);if(this.prev<l.finallyLoc)return r(l.finallyLoc)}else if(i){if(this.prev<l.catchLoc)return r(l.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<l.finallyLoc)return r(l.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var l=a;break}}l&&("break"===e||"continue"===e)&&l.tryLoc<=t&&t<=l.finallyLoc&&(l=null);var o=l?l.completion:{};return o.type=e,o.arg=t,l?(this.method="next",this.next=l.finallyLoc,u):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),N(n),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;N(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:S(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},e}function A(e,t,n,r,a,l,o){try{var i=e[l](o),s=i.value}catch(e){return void n(e)}i.done?t(s):Promise.resolve(s).then(r,a)}function _(e){return function(e){if(Array.isArray(e))return k(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||N(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,o,i=[],s=!0,c=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=l.call(n)).done)&&(i.push(r.value),i.length!==t);s=!0);}catch(e){c=!0,a=e}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw a}}return i}}(e,t)||N(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){if(e){if("string"==typeof e)return k(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?k(e,t):void 0}}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function S(){var e=(0,m.s0)(),t=(0,h.I0)(),n=u.Z.get("userId"),l=C((0,a.useState)(""),2),o=l[0],i=l[1],s=C((0,a.useState)([]),2),w=s[0],N=s[1],k=C((0,a.useState)(null),2),S=k[0],I=k[1],B=C((0,a.useState)(!1),2),L=B[0],O=B[1],R=C((0,a.useState)(!0),2),q=R[0],j=R[1],T=C((0,a.useState)(""),2),G=T[0],D=(T[1],C((0,a.useState)(!0),2)),J=D[0],P=D[1],W=C((0,a.useState)(!1),2),X=W[0],z=W[1];void 0!==u.Z.get("token")&&""!==u.Z.get("token")&&void 0!==u.Z.get("userId")||t((0,f.Tz)({},e,"/login"));var F=function(){new Audio(g).play()},Z=C((0,a.useState)(),2),M=Z[0],H=Z[1],U=(0,m.s0)(),Y=(0,h.v9)((function(e){return e.socketReducer})),V=(0,h.v9)((function(e){return e.wallet1})).data;Y.instance||t({type:"SOCKET_CONNECTED",payload:p.Z});var K=Y.instance,$=C((0,a.useState)({}),2),Q=$[0],ee=$[1],te=C((0,a.useState)(!1),2),ne=te[0],re=te[1],ae=C((0,a.useState)(!1),2),le=ae[0],oe=ae[1],ie=C((0,a.useState)(!1),2),se=ie[0],ce=ie[1],de=C((0,a.useState)(!1),2),ue=de[0],me=de[1],pe=C((0,a.useState)(!1),2),fe=pe[0],ve=pe[1],ye=C((0,a.useState)(!1),2),he=ye[0],ge=ye[1],be=(0,a.useRef)(null),Ee=null;(0,a.useEffect)((function(){var e;if(n){n&&K.connect();document.addEventListener("visibilitychange",(function(){P(!document.hidden)})),(Ee=K.connect())&&H(Ee),e=setInterval((function(){Ee.send(JSON.stringify({type:"heartbeat"}))}),2e3),Ee.send(JSON.stringify({type:"",payload:{userId:n}})),Ee.on("message",(function(e){var t=JSON.parse(e);if("heartbeat"===t.type&&Ee.send(JSON.stringify({type:"ack"})),2===t.status&&oe(!1),22===t.status&&ce(!1),21===t.status&&ge(!1),t.challengeRedirect)U("/game/".concat(t.challengeId));else{if(400===t.status)return oe(!1),ce(!1),ge(!1),void(t.error!==r.Am.errorText&&(r.Am.error(t.error),r.Am.errorText=t.error));if(t.sort&&function(e,t){e.sort((function(e,n){var r,a,l,o,i,s,c,d,u,m,p,f,v,y,h,g;return"playing"!==e.state||e.player!==t&&e.creator._id!==t?"playing"!==n.state||n.player!==t&&n.creator._id!==t?"open"===e.state&&(null===(r=e.creator)||void 0===r?void 0:r._id)===t?-1:"open"===n.state&&(null===(a=n.creator)||void 0===a?void 0:a._id)===t?1:"requested"===e.state&&(null===(l=e.player)||void 0===l?void 0:l._id)===t?-1:"requested"===n.state&&(null===(o=n.player)||void 0===o?void 0:o._id)===t?1:"requested"===e.state&&e.creator._id===t?-1:"requested"===n.state&&n.creator._id===t?1:"playing"===e.state&&(null===(i=e.creator)||void 0===i?void 0:i._id)===t||(null===(s=e.player)||void 0===s?void 0:s._id)===t?-1:"playing"===n.state&&(null===(c=n.creator)||void 0===c?void 0:c._id)===t||(null===(d=n.player)||void 0===d?void 0:d._id)===t?1:"hold"===e.state&&(null===(u=e.creator)||void 0===u?void 0:u._id)===t||(null===(m=e.player)||void 0===m?void 0:m._id)===t?-1:"hold"===n.state&&(null===(p=n.creator)||void 0===p?void 0:p._id)===t||(null===(f=n.player)||void 0===f?void 0:f._id)===t?1:"requested"===e.state&&e.player===t&&e.creator===t?-1:"requested"===n.state&&n.player===t&&n.creator===t?1:"open"===e.state&&e.creator._id!==t&&e.player!==t?-1:"open"===n.state&&n.creator._id!==t&&n.player!==t?1:(null===(v=e.creator)||void 0===v?void 0:v._id)!=t&&(null===(y=e.player)||void 0===y?void 0:y._id)!=t&&"playing"==e.state?-1:(null===(h=n.creator)||void 0===h?void 0:h._id)!=t&&(null===(g=n.player)||void 0===g?void 0:g._id)!=t&&"playing"==n.state?1:0:1:-1}))}(t,n),t.filter){var a=function(e,t,n,r){var a=e.filter((function(e){var n,r,a,l;return!("requested"===e.state&&(null===(n=e.player)||void 0===n?void 0:n._id)!==t&&(null===(r=e.creator)||void 0===r?void 0:r._id)!==t||"hold"===e.state&&(null===(a=e.player)||void 0===a?void 0:a._id)!==t&&(null===(l=e.creator)||void 0===l?void 0:l._id)!==t)}));return e.forEach((function(e){var r;"playing"===e.state&&(null===(r=e.player)||void 0===r?void 0:r._id)===t&&e.firstTime&&n(e._id),"requested"===e.state&&e.creator._id})),a}(t,n,Se);N(a)}}})),Ee.on("error",(function(e){console.log("ccc",e)}))}return n||(t((0,f.ls)()),U("/login")),Ee&&Ee.send(JSON.stringify({type:"deleteOpenChallengesOfCreator",payload:{userId:n}})),function(){clearInterval(e),Ee&&Ee.send(JSON.stringify({type:"deleteOpenChallengesOfCreator",payload:{userId:n}}))}}),[]),(0,a.useEffect)((function(){var e=_(w);!function(e,t,n){e.sort((function(e,r){var a,l,o,i,s,c;if("playing"===e.state&&(e.player===t||e.creator._id===t))return-1;if("playing"===r.state&&(r.player===t||r.creator._id===t))return 1;if("requested"===e.state&&e.creator._id===t)return-1;if("requested"===r.state&&r.creator._id===t)return 1;if("requested"===e.state&&(null===(a=e.player)||void 0===a?void 0:a._id)===t)return-1;if("requested"===r.state&&(null===(l=r.player)||void 0===l?void 0:l._id)===t)return 1;if("open"===e.state&&e.creator._id===t)return-1;if("open"===r.state&&r.creator._id===t)return 1;if("requested"===e.state&&e.player===t&&e.creator===t)return-1;if("requested"===r.state&&r.player===t&&r.creator===t)return 1;if("lowToHigh"==n){if("open"===e.state&&e.creator._id!==t)return"open"===r.state&&r.creator._id!==t?e.amount-r.amount:-1;if("open"===r.state&&r.creator._id!==t)return 1}else if("highToLow"==n){if("open"===e.state&&e.creator._id!==t)return"open"===r.state&&r.creator._id!==t?r.amount-e.amount:-1;if("open"===r.state&&r.creator._id!==t)return 1}return"open"===e.state&&e.creator._id!==t&&e.player!==t?-1:"open"===r.state&&r.creator._id!==t&&r.player!==t?1:(null===(o=e.creator)||void 0===o?void 0:o._id)!=t&&(null===(i=e.player)||void 0===i?void 0:i._id)!=t&&"playing"==e.state?-1:(null===(s=r.creator)||void 0===s?void 0:s._id)!=t&&(null===(c=r.player)||void 0===c?void 0:c._id)!=t&&"playing"==r.state?1:0}))}(e,n,G),N(e)}),[G]);var we=(0,a.useMemo)((function(){var e=0;return w.map((function(r){var a,l;if((null===(a=r.creator)||void 0===a?void 0:a._id)===n||(null===(l=r.player)||void 0===l?void 0:l._id)===n){var o,i,s,c;if("playing"===r.state)(null===(s=r.creator)||void 0===s?void 0:s._id)===n&&""!==r.results.player.result&&""===r.results.creator.result||(null===(c=r.player)||void 0===c?void 0:c._id)===n&&""===r.results.player.result&&""!==r.results.creator.result?t({type:"display_timer",payload:!0}):t({type:"display_timer",payload:!1});((null===(o=r.creator)||void 0===o?void 0:o._id)===n&&"open"===r.state||(null===(i=r.creator)||void 0===i?void 0:i._id)===n&&"requested"===r.state)&&e++}})),e}),[w,n]),xe=(0,a.useMemo)((function(){var e=0;return w.map((function(t){var r;"hold"===t.state&&(t.creator._id!==n&&t.player._id!==n||e++),(null===(r=t.creator)||void 0===r?void 0:r._id)===n&&"requested"===t.state&&q&&"cancel"!==L&&(F(),j(!1))})),e}),[w,n,q,L]);(0,a.useEffect)((function(){null!=M&&M.connected&&M&&(J||we&&we>0&&M.send(JSON.stringify({type:"deleteOpenChallengesOfCreator",payload:{userId:n}})))}),[xe,J]);(0,a.useEffect)((function(){S&&"delete"===L?_e(S):S&&"cancel"===L?Ae(S):S&&"requested"===L?Ne(S):"string"!=typeof S&&"playChallange"===L?(I(S._id),Ce(S)):S&&"viewChallange"===L&&ke(S)}),[S,L]);var Ae=function(){var e,t=(e=x().mark((function e(t){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:fe||(ve(!0),M.send(JSON.stringify({type:"cancel",payload:{challengeId:t,userId:n}})),j(!0),ve(!1));case 1:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var l=e.apply(t,n);function o(e){A(l,r,a,o,i,"next",e)}function i(e){A(l,r,a,o,i,"throw",e)}o(void 0)}))});return function(e){return t.apply(this,arguments)}}(),_e=function(e){M.send(JSON.stringify({type:"delete",payload:{challengeId:e,userId:n}}))},Ce=function(e){V.wallet>=e.amount?(ue||(me(!0),M.send(JSON.stringify({type:"play",payload:{challengeId:e._id,userId:n}}))),me(!1)):r.Am.error("not enough chips")},Ne=function(e){he||(M.send(JSON.stringify({type:"cancel",payload:{challengeId:e,userId:n}})),ge(!1))},ke=function(e){se||(ce(!0),M.send(JSON.stringify({type:"startGame",payload:{challengeId:e,userId:n}})),I(null),console.log("StartGame"))},Se=function(e){U("/game/".concat(e))};return a.createElement("div",{className:"col-12 col-sm-12 col-md-6 col-lg-4 mx-auto p-3 g-0",style:{padding:"1rem",important:"true"}},a.createElement("audio",{ref:be,src:g}),a.createElement("div",{className:"d-flex flex-column"},a.createElement("div",{className:"bg-gray-200 h-100 w-100 p-3 bg-light d-flex align-items-center justify-content-between hstack gap-2 "},a.createElement("div",{className:"input-group flex-1 flex-nowrap"},a.createElement("input",{type:"number",onChange:function(e){i(e.target.value)},value:o,className:"form-control",min:50,max:1e4,placeholder:"Amount",style:{display:"inline-block",verticalAlign:"middle",width:"auto"}}),a.createElement("button",{disabled:le,onClick:function(){oe(!0),o<=0?(r.Am.error("amount should be greater that 0 and multiples of 50"),oe(!1)):o>1e4?(r.Am.error("amount should lesser than or equals to 10000"),oe(!1)):o%50!=0?(r.Am.error("amount should be multiple of 50"),oe(!1)):(M.send(JSON.stringify({type:"create",payload:{amount:o,userId:n}})),i(""))},className:"btn btn-primary w-25",style:{borderTopRightRadius:"6px",borderBottomRightRadius:"6px"}},le?a.createElement(a.Fragment,null,a.createElement(v.Z,{style:{width:"1.0rem",height:"1.0rem",verticalAlign:"middle",color:"#fff"}})," ","Set"):"Set"),a.createElement("br",null))),a.createElement("ul",{className:"m-0 px-2"},a.createElement("div",{className:"separator mt-3 mb-3"},a.createElement("img",{src:"https://ludo-players.s3.ap-south-1.amazonaws.com/cdn/lp/illustrations/winner-cup-icon-png-19.png",alt:"WinCupImg",style:{width:"20px",height:"20px"}})," Open Battles ",a.createElement("img",{src:"https://ludo-players.s3.ap-south-1.amazonaws.com/cdn/lp/illustrations/winner-cup-icon-png-19.png",alt:"WinCupImg",style:{width:"20px",height:"20px"}})),a.createElement(c,{ws:M,challenges:w,userId:n,isButtonDisabled:S,isButtonType:L,setIsButtonDisabled:I,cancelChallenge:Ne,setIsButtonType:O,playGameLoading:ue,RequestedLoading:he,viewGame:Se,viewHold:function(e){var t,r,a;ee(e),e.creator._id===n&&""===(null===(t=e.results.creator)||void 0===t?void 0:t.result)||(null===(r=e.player)||void 0===r?void 0:r._id)===n&&""===(null===(a=e.results.player)||void 0===a?void 0:a.result)?Se(e._id):re(!0)},startGameLoading:se,handleOpen:function(){z(!0)},cancelChallengeCreator:fe}))),a.createElement(y.Z,{open:X,onClose:function(){z(!1)}},a.createElement(b.Z,{style:{paddingTop:"13px"}},a.createElement(E.Z,{variant:"body1"},a.createElement("b",null,"Admin Will Update Result")))),a.createElement(d,{holdModal:ne,holdChallenge:Q,userId:n,setHoldModal:re}))}},85546:function(e,t,n){"use strict";n.r(t);var r=n(23645),a=n.n(r)()(!0);a.push([e.id,'@keyframes leftToRight {\r\n  0% {\r\n    -webkit-transform: translateX(-500px);\r\n    transform: translateX(-500px);\r\n  }\r\n  to {\r\n    -webkit-transform: translateX(0);\r\n    transform: translateX(0);\r\n  }\r\n}\r\n\r\n.appear-from-left {\r\n  -webkit-animation: leftToRight 0.6s linear;\r\n  animation: leftToRight 0.6s linear;\r\n}\r\n\r\n.separator {\r\n  align-items: center;\r\n  color: gray;\r\n  display: flex;\r\n  font-size: 1.3rem;\r\n  font-weight: 700;\r\n  text-align: center;\r\n}\r\n\r\n.separator:after,\r\n.separator:before {\r\n  border-bottom: 2px solid #000;\r\n  content: "";\r\n  flex: 1 1;\r\n}\r\n\r\n.separator:not(:empty):before {\r\n  margin-right: 0.25em;\r\n}\r\n\r\n.separator:not(:empty):after {\r\n  margin-left: 0.25em;\r\n}\r\n.toast-message {\r\n  background: darkblue;\r\n  color: #fff;\r\n  font-size: 20px;\r\n  width: 34vw;\r\n  padding: 30px 20px;\r\n}',"",{version:3,sources:["webpack://src/modules/common/pages/animation.css"],names:[],mappings:"AAAA;EACE;IACE,qCAAqC;IACrC,6BAA6B;EAC/B;EACA;IACE,gCAAgC;IAChC,wBAAwB;EAC1B;AACF;;AAEA;EACE,0CAA0C;EAC1C,kCAAkC;AACpC;;AAEA;EACE,mBAAmB;EACnB,WAAW;EACX,aAAa;EACb,iBAAiB;EACjB,gBAAgB;EAChB,kBAAkB;AACpB;;AAEA;;EAEE,6BAA6B;EAC7B,WAAW;EACX,SAAS;AACX;;AAEA;EACE,oBAAoB;AACtB;;AAEA;EACE,mBAAmB;AACrB;AACA;EACE,oBAAoB;EACpB,WAAW;EACX,eAAe;EACf,WAAW;EACX,kBAAkB;AACpB",sourcesContent:['@keyframes leftToRight {\r\n  0% {\r\n    -webkit-transform: translateX(-500px);\r\n    transform: translateX(-500px);\r\n  }\r\n  to {\r\n    -webkit-transform: translateX(0);\r\n    transform: translateX(0);\r\n  }\r\n}\r\n\r\n.appear-from-left {\r\n  -webkit-animation: leftToRight 0.6s linear;\r\n  animation: leftToRight 0.6s linear;\r\n}\r\n\r\n.separator {\r\n  align-items: center;\r\n  color: gray;\r\n  display: flex;\r\n  font-size: 1.3rem;\r\n  font-weight: 700;\r\n  text-align: center;\r\n}\r\n\r\n.separator:after,\r\n.separator:before {\r\n  border-bottom: 2px solid #000;\r\n  content: "";\r\n  flex: 1 1;\r\n}\r\n\r\n.separator:not(:empty):before {\r\n  margin-right: 0.25em;\r\n}\r\n\r\n.separator:not(:empty):after {\r\n  margin-left: 0.25em;\r\n}\r\n.toast-message {\r\n  background: darkblue;\r\n  color: #fff;\r\n  font-size: 20px;\r\n  width: 34vw;\r\n  padding: 30px 20px;\r\n}'],sourceRoot:""}]),t.default=a},61252:function(e,t,n){var r=n(93379),a=n(85546);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.id,a,""]]);var l={insert:"head",singleton:!1};r(a,l);e.exports=a.locals||{}}}]);
//# sourceMappingURL=bundle.1fd3f24c4ad268c254ce.js.map